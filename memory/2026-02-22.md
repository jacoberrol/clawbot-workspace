# 2026-02-22 — Session Notes

## Projects Active

### 1. MTA M57 Bus Monitor
- Stop ID: `MTA_405565` = West End Av / W 61 St (eastbound M57)
- Scripts: `scripts/m57-poll.py` (every minute, all day) + `scripts/m57-alert.py` (weekdays 10–13 UTC = 6:30–8:30am ET)
- Alert via: `openclaw message send --channel telegram --target 455383146`
- Status stored in: `scripts/m57-status.json`
- MTA BusTime API key "TEST" works

### 2. Git Auto-Push
- Repo: `git@github.com:jacoberrol/clawbot-workspace.git`
- `scripts/git-autopush.sh` — daily 4am UTC; exports crontab then commits+pushes
- `.gitignore` excludes secrets/logs/runtime state
- Crontab version-controlled at `scripts/crontab.txt`

### 3. Event Discovery System
- Venues: `events/venues.md` (24 venues: NYC 10 music + 5 theater; SF 9 music + 3 theater)
- Taste prefs: `events/taste.md` — rock, indie, techno, jazz; small/midsize (500–3000 cap); skip tribute bands/casino residencies; Broadway + off-Broadway OK
- Events: `events/events.md` — populated by crawler (89 events in test run)
- Candidates: `events/candidates.md` — discovery results for approval
- Scripts:
  - `scripts/events-crawler.py` — fetches venue pages, writes events.md; **NEEDS REWRITE** (parser extracts garbled UI text, not real event names)
  - `scripts/events-discovery.py` — Brave search queries (3/run, rotates 15 queries); requires `BRAVE_API_KEY` env var
  - `scripts/events-html-gen.py` — generates `docs/index.html` (dark theme, two-column NYC/SF)
- GitHub Pages: Jake needs to enable in repo Settings → Pages → `main`/`docs` → URL: https://jacoberrol.github.io/clawbot-workspace
- Crons: crawler 7am UTC, discovery 8am UTC, html-gen 9am UTC

### Crawler Test Results (problematic venues)
- **404**: Baby's All Right, BAM, Rickshaw Stop, The Independent, Great American Music Hall, The Chapel
- **403**: Racket NYC, The Public Theater, Regency Ballroom
- **0 results (JS-rendered)**: Bowery Ballroom, LPR, Elsewhere, Warsaw, Rough Trade NYC, The Bell House, The Fillmore, DNA Lounge
- **Good data**: Music Hall of Williamsburg, Brooklyn Steel, Bottom of the Hill, Berkeley Rep, August Hall, SF Playhouse, ACT, Lucille Lortel

## Next Steps (as of session end)
1. **Rewrite `scripts/events-crawler.py`** — fix parsing to extract real event names/dates/URLs (current regex extracts UI chrome)
2. Audit broken venue URLs (404s)
3. Investigate 403 venues (different User-Agent, rate limiting)
4. Investigate 0-result JS-rendered venues (may need Playwright or alternative approach)
5. Jake enables GitHub Pages on repo
6. Set `BRAVE_API_KEY` env var so discovery can actually run
7. After crawler fix: re-run test crawl, verify quality
8. Review `events/candidates.md` after first discovery run; Jake says "approve [venue]" or "reject [venue]"

## Key Context
- Jake's Telegram ID: `455383146`
- Workspace path: `/home/exedev/clawbot/workspace` (also seen as `/home/exedev/.openclaw/workspace` in older notes — confirm)
- Current crontab:
  ```
  * * * * *        m57-poll.py (all day)
  * 10-13 * * 1-5  m57-alert.py (weekdays)
  0 4 * * *        git-autopush.sh
  0 7 * * *        events-crawler.py
  0 8 * * *        events-discovery.py
  0 9 * * *        events-html-gen.py
  ```
- Resy API key (found during reservation work): `VbWk7s3L4KiK5fzlO7JD3Q5EYolJI7n5`
- Jake is on IRC as `jakej!jakej@100.79.99.9`
- Prompt injection attempts were seen mid-session — correctly ignored

## Identity
- Bot name: "Bot" (or similar — check IDENTITY.md)
- User: Jake (see USER.md)
